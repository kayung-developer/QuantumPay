<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#4F46E5" />
    <meta
      name="description"
      content="QuantumPay: The hyper-secure, AI-powered global payment system for instantaneous transactions, multi-currency wallets, and comprehensive business financial tools."
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Lexend:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <title>QuantumPay - The Future of Global Payments</title>

    <!-- [THE IMPLEMENTATION] CSS for the Static Loader -->
    <style>
      :root {
        /* Define theme colors as CSS variables. Default to dark mode values. */
        --loader-bg-color: #020617;
        --loader-text-color: #94A3B8;
        --page-bg-color: #020617; /* This will be the initial body background */
      }

      /* This is the class our script will add for light mode */
      html.light {
        --loader-bg-color: #F8FAFC; /* light neutral-50 */
        --loader-text-color: #475569; /* light neutral-600 */
        --page-bg-color: #FFFFFF;
      }

      html {
        /* Set the initial background color using the variable */
        background-color: var(--page-bg-color);
      }

      .qp-loader {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-color: var(--loader-bg-color);
        transition: opacity 0.5s ease-out;
      }

      .qp-loader-text {
        font-family: 'Lexend', sans-serif;
        color: var(--loader-text-color);
        margin-top: 1.5rem;
        font-size: 1rem;
        opacity: 0.8;
      }

      /* ... (All animation keyframes: draw-orbit, move-satellite, pulse-bg remain unchanged) ... */
      @keyframes draw-orbit { to { stroke-dashoffset: 0; } }
      @keyframes move-satellite { 0% { offset-distance: 0%; } 100% { offset-distance: 100%; } }
      @keyframes pulse-bg { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }

      .qp-loader-svg .qp-orbit-bg {
        animation: pulse-bg 4s ease-in-out infinite;
        transform-origin: center;
      }
      .qp-loader-svg .qp-orbit-path {
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: draw-orbit 2s ease-out forwards;
      }
      .qp-loader-svg .qp-satellite {
        offset-path: path("M49 38 C 54 28, 48 16, 36 14 C 24 12, 14 20, 14 32 C 14 44, 24 52, 36 50");
        animation: move-satellite 3s cubic-bezier(0.65, 0, 0.35, 1) infinite;
      }
    </style>

    <!-- Pre-emptive Theme Application Script (no changes needed here) -->
    <script>
      (function() {
        try {
          var theme = localStorage.getItem('theme');
          var root = document.documentElement;
          if (theme === 'dark' || theme === 'light') {
            root.classList.add(theme);
          } else {
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
              root.classList.add('dark');
            } else {
              root.classList.add('light');
            }
          }
        } catch (e) {
          console.error('Error applying pre-emptive theme:', e);
        }
      })();
    </script>
  </head>

  <!-- [THE FIX] The body tag no longer has default colors. It lets Tailwind and our AppearanceProvider take control after load. -->
  <body class="h-full font-sans antialiased overflow-x-hidden">
    <noscript>You need to enable JavaScript to run this powerful financial application.</noscript>

    <div id="root">
        <div class="qp-loader">
            <svg class="qp-loader-svg" width="80" height="80" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="orbit-bg" x1="0" y1="0" x2="64" y2="64" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#5E54F3"/>
                        <stop offset="1" stop-color="#2DD4BF"/>
                    </linearGradient>
                    <path id="orbitPath" d="M49 38 C 54 28, 48 16, 36 14 C 24 12, 14 20, 14 32 C 14 44, 24 52, 36 50" />
                </defs>
                <rect class="qp-orbit-bg" width="64" height="64" rx="12" fill="url(#orbit-bg)"/>
                <use href="#orbitPath" class="qp-orbit-path" stroke="white" stroke-width="6" stroke-linecap="round" fill="none"/>
                <path d="M34 50 C 40 48, 45 44, 49 38" stroke="white" stroke-width="6" stroke-linecap="round" fill="none" opacity="0.5"/>
                <circle class="qp-satellite" r="5" fill="#2DD4BF" stroke="#FFFFFF" stroke-width="2"/>
            </svg>
            <p class="qp-loader-text">Launching QuantumPay...</p>
        </div>
    </div>
  </body>
</html>